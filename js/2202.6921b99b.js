"use strict";(self["webpackChunktangdata"]=self["webpackChunktangdata"]||[]).push([[2202,88],{2202:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var r=n(6768);const o={class:"chart-card"};function i(e,t,n,i,a,s){const c=(0,r.g2)("ChartView");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.bF)(c,{option:s.chartOption,class:"chart-wrapper"},null,8,["option"])])}var a=n(88),s=n(5e3),c={components:{ChartView:a["default"]},props:{chart:Object,returnData:Object,config:Object,chartType:String,yearLimit:{type:Number,default:10},isHorizontal:Boolean,legendAllSelected:Boolean},computed:{adjustedLegendTop(){const e=this.chart.legendTop||"15%";if(window.innerWidth<=768){if("string"===typeof e&&e.endsWith("%")){const t=parseFloat(e);return t/3+"%"}return"number"===typeof e?e/3:"5%"}return e},chartOption(){const e={data:this.returnData,cityCodeArr:this.config?.cityCodeArr||[],title:this.chart.title,subtitle:this.chart.subtitle,dbCode:this.chart.dbCode,zbcodeArr:this.chart.zbcodeArr,unit:this.chart.unit,exceptName:this.chart.exceptName,legendTop:this.adjustedLegendTop,gridTop:this.chart.gridTop,echrtId:this.chart.id,chartType:this.chartType,yearLimit:this.yearLimit,isHorizontal:this.isHorizontal,legendAllSelected:this.legendAllSelected},t=(0,s.HM)(e);return t.title&&delete t.title,t}}},l=n(1241);const d=(0,l.A)(c,[["render",i],["__scopeId","data-v-16ae2ee1"]]);var u=d},88:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var r=n(6768);const o={ref:"chartContainer",class:"chart-view"};function i(e,t,n,i,a,s){return(0,r.uX)(),(0,r.CE)("div",o,null,512)}var a=n(144),s=n(9671),c={name:"ChartView",props:{option:{type:Object,required:!0},debug:{type:Boolean,default:!1}},setup(e){const t=(0,a.KR)(null);let n=null,o=null,i=0,c=0,l=0;const d=(...t)=>{e.debug&&console.log("[ChartView]",...t)},u=()=>{t.value&&(n||(i++,console.time(`echarts-init-${i}`),n=s.Ts(t.value),console.timeEnd(`echarts-init-${i}`),d(`init #${i} (container):`,t.value),window.addEventListener("resize",p),o=new ResizeObserver((()=>{n&&n.resize()})),o.observe(t.value)),e.option&&Object.keys(e.option).length>0&&h(e.option))},h=e=>{if(!n)return;l++;const t=`echarts-setOption-${l}`;console.time(t);try{n.setOption(e,!1,!0)}catch(r){console.error("[ChartView] setOption error",r)}console.timeEnd(t),d(`setOption count=${l}`)},p=()=>{n&&n.resize()};return(0,r.sV)((async()=>{await(0,r.dY)(),d("onMounted"),u()})),(0,r.wB)((()=>e.option),(e=>{if(e&&Object.keys(e).length>0){const t=performance.now();h(e);const n=performance.now();d(`watch->applyOption elapsed ${(n-t).toFixed(1)} ms`)}}),{deep:!0}),(0,r.xo)((()=>{if(c++,console.time(`echarts-dispose-${c}`),window.removeEventListener("resize",p),o&&t.value){try{o.unobserve(t.value),o.disconnect()}catch(e){}o=null}if(n){try{n.dispose()}catch(e){}n=null}console.timeEnd(`echarts-dispose-${c}`),d("onBeforeUnmount, disposeCount=",c)})),{chartContainer:t}}},l=n(1241);const d=(0,l.A)(c,[["render",i],["__scopeId","data-v-4a7cde61"]]);var u=d}}]);
//# sourceMappingURL=2202.6921b99b.js.map