"use strict";(self["webpackChunktangdata"]=self["webpackChunktangdata"]||[]).push([[5631,88],{5631:function(t,e,n){n.r(e),n.d(e,{default:function(){return l}});var r=n(6768);const o={class:"chart-card"};function i(t,e,n,i,a,s){const c=(0,r.g2)("ChartView");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.bF)(c,{option:s.chartOption,class:"chart-wrapper"},null,8,["option"])])}var a=n(88),s=n(5e3),c={components:{ChartView:a["default"]},props:{chart:Object,returnData:Object,config:Object,chartType:String,yearLimit:{type:Number,default:10},isHorizontal:Boolean},computed:{adjustedLegendTop(){const t=this.chart.legendTop||"15%";if(window.innerWidth<=768){if("string"===typeof t&&t.endsWith("%")){const e=parseFloat(t);return e/3+"%"}return"number"===typeof t?t/3:"5%"}return t},chartOption(){const t={data:this.returnData,cityCodeArr:this.config?.cityCodeArr||[],title:this.chart.title,subtitle:this.chart.subtitle,dbCode:this.chart.dbCode,zbcodeArr:this.chart.zbcodeArr,unit:this.chart.unit,exceptName:this.chart.exceptName,legendTop:this.adjustedLegendTop,gridTop:this.chart.gridTop,echrtId:this.chart.id,chartType:this.chartType,yearLimit:this.yearLimit,isHorizontal:this.isHorizontal},e=(0,s.HM)(t);return e.title&&delete e.title,e}}},d=n(1241);const u=(0,d.A)(c,[["render",i],["__scopeId","data-v-634bd65e"]]);var l=u},88:function(t,e,n){n.r(e),n.d(e,{default:function(){return l}});var r=n(6768);const o={ref:"chartContainer",class:"chart-view"};function i(t,e,n,i,a,s){return(0,r.uX)(),(0,r.CE)("div",o,null,512)}var a=n(144),s=n(9671),c={name:"ChartView",props:{option:{type:Object,required:!0},debug:{type:Boolean,default:!1}},setup(t){const e=(0,a.KR)(null);let n=null,o=null,i=0,c=0,d=0;const u=(...e)=>{t.debug&&console.log("[ChartView]",...e)},l=()=>{e.value&&(n||(i++,console.time(`echarts-init-${i}`),n=s.Ts(e.value),console.timeEnd(`echarts-init-${i}`),u(`init #${i} (container):`,e.value),window.addEventListener("resize",p),o=new ResizeObserver((()=>{n&&n.resize()})),o.observe(e.value)),t.option&&Object.keys(t.option).length>0&&h(t.option))},h=t=>{if(!n)return;d++;const e=`echarts-setOption-${d}`;console.time(e);try{n.setOption(t,!1,!0)}catch(r){console.error("[ChartView] setOption error",r)}console.timeEnd(e),u(`setOption count=${d}`)},p=()=>{n&&n.resize()};return(0,r.sV)((async()=>{await(0,r.dY)(),u("onMounted"),l()})),(0,r.wB)((()=>t.option),(t=>{if(t&&Object.keys(t).length>0){const e=performance.now();h(t);const n=performance.now();u(`watch->applyOption elapsed ${(n-e).toFixed(1)} ms`)}}),{deep:!0}),(0,r.xo)((()=>{if(c++,console.time(`echarts-dispose-${c}`),window.removeEventListener("resize",p),o&&e.value){try{o.unobserve(e.value),o.disconnect()}catch(t){}o=null}if(n){try{n.dispose()}catch(t){}n=null}console.timeEnd(`echarts-dispose-${c}`),u("onBeforeUnmount, disposeCount=",c)})),{chartContainer:e}}},d=n(1241);const u=(0,d.A)(c,[["render",i],["__scopeId","data-v-4a7cde61"]]);var l=u}}]);
//# sourceMappingURL=5631.427afee2.js.map